{"version":3,"sources":["webpack:///./src/views/operation/individual-rebate.vue?e02f","webpack:///./src/views/operation/individual-rebate.vue","webpack:///src/views/operation/individual-rebate.vue"],"names":["operation_individual_rebate","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","inline","label","label-width","staticStyle","width","placeholder","maxlength","clearable","model","value","callback","$$v","searchedAgentId","expression","_v","margin-right","type","on","click","handleSearchAgent","margin-top","color","columns","tableColumns","data","tableRows","border","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","individual_rebate","__webpack_exports__","_this","title","key","align","h","params","row","avatar","indexOf","src","style","height","border-radius","isBeingEdited","props","directRebateRatioInputValue","step","min","max","formatter","toFixed","parser","replace","on-change","newValue","directRebateRatio","subordinateRebateRatioInputValue","subordinateRebateRatio","marginRight","submitRowChange","cancelRowChange","index","hasIndividualRebateRatio","beginChangeRow","onClickIndividualRebateRatioCancelBtn","beingEditedRowIndex","isShowingAgentWithoutIndividualRebateRatio","latestSearch","created","queryAllAgentsWithIndividualRebateRatio","methods","trim","length","agentId","parseInt","isNaN","$Message","error","queryAgentRebateRatioInfo","_this2","$http","post","global","url","query_agents_individual_rebate_ratio_info","then","records","i","push","id","agent_id","name","commerceId","commerce_id","commerceName","commerce_name","direct_rebate_ratio","subordinate_rebate_ratio","has_individual_rebate_ratio","agentLevelName","getAgentLevelNameByLevel","agent_level","_this3","query_agent_individual_rebate_ratio_info","record","err_code","err_msg","_this4","update_agent_individual_rebate_ratio_info","info","_this5","$Modal","confirm","content","onOk","cancelIndividualRebateRatio","_this6","cancel_agent_individual_rebate_ratio","level","toString"],"mappings":"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","file":"static/js/20.fda4c321187e68196aa9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"content-bar\"},[_c('Form',{attrs:{\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":\"代理ID\",\"label-width\":80}},[_c('Input',{staticStyle:{\"width\":\"10em\"},attrs:{\"placeholder\":\"代理ID\",\"maxlength\":6,\"clearable\":\"\"},model:{value:(_vm.searchedAgentId),callback:function ($$v) {_vm.searchedAgentId=$$v},expression:\"searchedAgentId\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label-width\":0}},[_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSearchAgent}},[_vm._v(\"查询\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[(_vm.isShowingAgentWithoutIndividualRebateRatio)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"该代理尚未被授予独立返利比例：\")]):_c('div',[_vm._v(\"被授予独立返利比例的代理：\")])]),_vm._v(\" \"),_c('Table',{attrs:{\"columns\":_vm.tableColumns,\"data\":_vm.tableRows,\"border\":\"\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-9249563a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/operation/individual-rebate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9249563a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./individual-rebate.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./individual-rebate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./individual-rebate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9249563a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./individual-rebate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/operation/individual-rebate.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div class=\"content-bar\">\n      <Form inline>\n        <FormItem label=\"代理ID\" :label-width=\"80\">\n          <Input v-model=\"searchedAgentId\" placeholder=\"代理ID\" :maxlength=\"6\" clearable style=\"width: 10em;\"/>\n        </FormItem>\n\n\n        <FormItem :label-width=\"0\"> <Button type=\"primary\" @click=\"handleSearchAgent\" style=\"margin-right: 10px;\">查询</Button></FormItem>\n        </FormItem>\n      </Form>\n\n    </div>\n    <div style=\"margin-top: 10px;\">\n      <div v-if=\"isShowingAgentWithoutIndividualRebateRatio\" style=\"color: red;\">该代理尚未被授予独立返利比例：</div>\n      <div v-else>被授予独立返利比例的代理：</div>\n    </div>\n    <Table :columns=\"tableColumns\" :data=\"tableRows\" border>\n    </Table>\n  </div>\n</template>\n<style>\n  @import \"../../assets/style/common.css\";\n</style>\n<script>\n  export default {\n    data() {\n      return {\n        tableColumns: [\n          { title: \"游戏内id\", key: \"id\", align: \"center\", width: 100 },\n          { title: \"名称\", key: \"name\", align: \"center\", width: 150 },\n          {\n            title: \"头像\",\n            key: \"avatar\",\n            align: \"center\",\n            width: 80,\n            render: (h, params) => {\n              if (params.row.avatar.indexOf(\"http://\") == -1 && params.row.avatar.indexOf(\"https://\") == -1) {\n                return h(\"div\", \"\");\n              } else {\n                return h(\"img\", {\n                  attrs: {\n                    src: params.row.avatar\n                  },\n                  style: {\n                    width: \"40px\",\n                    height: \"40px\",\n                    \"border-radius\": \"5px\",\n                    \"margin-top\": \"5px\"\n                  }\n                });\n              }\n            }\n          },\n          { title: \"所属商务\", key: \"commerceName\", align: \"center\", width: 100 },\n          { title: \"代理等级\", key: \"agentLevelName\", align: \"center\", width: 100 },\n          {\n            title: \"直属返利比例\",\n            key: \"directRebateRatio\",\n            align: \"center\",\n            width: 120,\n            render: (h, params) => {\n              if (params.row.isBeingEdited) {\n                return h(\"InputNumber\", {\n                  props: {\n                    value: params.row.directRebateRatioInputValue,\n                    step: 0.01,\n                    min: 0,\n                    max: 1,\n                    formatter: value => `${(100 * value).toFixed(0)}%`,\n                    parser: value => (0.01 * value.replace(\"%\", \"\")).toFixed(2)\n                  },\n                  on: {\n                    \"on-change\": newValue => {\n                      params.row.directRebateRatioInputValue = newValue;\n                    }\n                  }\n                });\n              } else {\n                return h(\"div\", (100 * params.row.directRebateRatio).toFixed(0) + \"%\");\n              }\n            }\n          },\n          {\n            title: \"下级返利比例\",\n            key: \"subordinateRebateRatio\",\n            align: \"center\",\n            width: 120,\n            render: (h, params) => {\n              if (params.row.isBeingEdited) {\n                return h(\"InputNumber\", {\n                  props: {\n                    value: params.row.subordinateRebateRatioInputValue,\n                    step: 0.01,\n                    min: 0,\n                    max: 1,\n                    formatter: value => `${(100 * value).toFixed(0)}%`,\n                    parser: value => (0.01 * value.replace(\"%\", \"\")).toFixed(2)\n                  },\n                  on: {\n                    \"on-change\": newValue => {\n                      params.row.subordinateRebateRatioInputValue = newValue;\n                    }\n                  }\n                });\n              } else {\n                return h(\"div\", (100 * params.row.subordinateRebateRatio).toFixed(0) + \"%\");\n              }\n            }\n          },\n          {\n            title: \"操作\",\n            key: \"action\",\n            render: (h, params) => {\n              if (params.row.isBeingEdited) {\n                return h(\"div\", [\n                  h(\n                    \"Button\",\n                    {\n                      props: {\n                        type: \"primary\"\n                      },\n                      style: {\n                        marginRight: \"5px\"\n                      },\n                      on: {\n                        click: () => {\n                          this.submitRowChange(params.row);\n                        }\n                      }\n                    },\n                    \"确定\"\n                  ),\n                  h(\n                    \"Button\",\n                    {\n                      props: {\n                        type: \"error\"\n                      },\n                      on: {\n                        click: () => {\n                          this.cancelRowChange(params.index);\n                        }\n                      }\n                    },\n                    \"取消\"\n                  )\n                ]);\n              } else if (params.row.hasIndividualRebateRatio) {\n                return h(\"div\", [\n                  h(\n                    \"Button\",\n                    {\n                      props: {\n                        type: \"primary\"\n                      },\n                      style: {\n                        marginRight: \"5px\"\n                      },\n                      on: {\n                        click: () => {\n                          this.beginChangeRow(params.index);\n                        }\n                      }\n                    },\n                    \"调整独立返利比例\"\n                  ),\n                  h(\n                    \"Button\",\n                    {\n                      props: {\n                        type: \"error\"\n                      },\n                      on: {\n                        click: () => {\n                          this.onClickIndividualRebateRatioCancelBtn(params.row);\n                        }\n                      }\n                    },\n                    \"取消独立返利比例\"\n                  )\n                ]);\n              } else {\n                return h(\"Button\", {\n                  props: {\n                    type: \"primary\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.beginChangeRow(params.index);\n                    }\n                  }\n                }, \"授予独立返利比例\");\n              }\n            }\n          }\n        ],\n        tableRows: [],\n        searchedAgentId: \"\",\n        beingEditedRowIndex: -1,\n        isShowingAgentWithoutIndividualRebateRatio: false,\n        latestSearch: null,\n      };\n    },\n\n    created() {\n      this.queryAllAgentsWithIndividualRebateRatio();\n    },\n\n    methods: {\n      handleSearchAgent() {\n        var isSearchingAllAgents = this.searchedAgentId.trim().length == 0;\n\n        if (isSearchingAllAgents) {\n          this.queryAllAgentsWithIndividualRebateRatio();\n        } else {\n          var agentId = parseInt(this.searchedAgentId.trim());\n          if (isNaN(agentId) || agentId <= 0) {\n            this.$Message.error(\"请正确输入代理id\");\n            return;\n          }\n\n          this.queryAgentRebateRatioInfo(agentId);\n        }\n      },\n\n      queryAllAgentsWithIndividualRebateRatio() {\n        // 清空table\n        this.tableRows = [];\n        this.isShowingAgentWithoutIndividualRebateRatio = false;\n\n        this.$http.post(global.url.query_agents_individual_rebate_ratio_info, {}).then(records => {\n          if (!records) {\n            return;\n          }\n\n          for (var i = 0; i < records.length; i++) {\n            this.tableRows.push({\n              id: records[i].agent_id,\n              name: records[i].name,\n              avatar: records[i].avatar,\n              commerceId: records[i].commerce_id,\n              commerceName: records[i].commerce_name,\n              directRebateRatio: records[i].direct_rebate_ratio,\n              subordinateRebateRatio: records[i].subordinate_rebate_ratio,\n              hasIndividualRebateRatio: (records[i].has_individual_rebate_ratio == 1),\n              agentLevelName: this.getAgentLevelNameByLevel(records[i].agent_level),\n              directRebateRatioInputValue: 0,\n              subordinateRebateRatioInputValue: 0,\n              isBeingEdited: false,\n            });\n          }\n        });\n\n        // 保存本次查询\n        this.latestSearch = () => { this.queryAllAgentsWithIndividualRebateRatio(); };\n      },\n\n      queryAgentRebateRatioInfo(agentId) {\n        // 清空table\n        this.tableRows = [];\n        this.isShowingAgentWithoutIndividualRebateRatio = false;\n\n        this.$http\n          .post(global.url.query_agent_individual_rebate_ratio_info, {\n            agentId: agentId\n          })\n          .then(record => {\n            if (!record) {\n              return;\n            }\n\n            if (record.err_code != 0) {\n              this.$Message.error(record.err_msg);\n              return;\n            }\n\n            this.tableRows.push({\n              id: record.agent_id,\n              name: record.name,\n              avatar: record.avatar,\n              commerceId: record.commerce_id,\n              commerceName: record.commerce_name,\n              directRebateRatio: record.direct_rebate_ratio,\n              subordinateRebateRatio: record.subordinate_rebate_ratio,\n              hasIndividualRebateRatio: (record.has_individual_rebate_ratio == 1),\n              agentLevelName: this.getAgentLevelNameByLevel(record.agent_level),\n              directRebateRatioInputValue: 0,\n              subordinateRebateRatioInputValue: 0,\n              isBeingEdited: false,\n            });\n\n            this.isShowingAgentWithoutIndividualRebateRatio = (record.has_individual_rebate_ratio == 0);\n          });\n\n        // 保存本次查询\n        this.latestSearch = () => { this.queryAgentRebateRatioInfo(agentId); };\n      },\n\n      submitRowChange(row) {\n        this.$http.post(global.url.update_agent_individual_rebate_ratio_info, {\n          agentId: row.id,\n          directRebateRatio: row.directRebateRatioInputValue,\n          subordinateRebateRatio: row.subordinateRebateRatioInputValue\n        }).then(record => {\n          if (!record) {\n            return;\n          }\n\n          if (record.err_code != 0) {\n            this.$Message.error(record.err_msg);\n          } else {\n            this.$Message.info(\"操作成功\");\n            row.isBeingEdited = false;\n\n            // 自动执行查询以刷新页面数据\n            this.latestSearch();\n          }\n        });\n      },\n\n      cancelRowChange(index) {\n        this.tableRows[index].isBeingEdited = false;\n        this.beingEditedRowIndex = -1;\n      },\n\n      beginChangeRow(index) {\n        if (this.beingEditedRowIndex >= 0) {\n          this.cancelRowChange(this.beingEditedRowIndex);\n        }\n\n        this.tableRows[index].isBeingEdited = true;\n        this.beingEditedRowIndex = index;\n        this.tableRows[index].directRebateRatioInputValue = this.tableRows[index].directRebateRatio;\n        this.tableRows[index].subordinateRebateRatioInputValue = this.tableRows[index].subordinateRebateRatio;\n      },\n\n      onClickIndividualRebateRatioCancelBtn(row) {\n        this.$Modal.confirm({\n          content: `<p>即将取消代理【${row.name}】的独立返利比例</p><p>取消后，该代理的返利比例将会是与其等级对应的默认值</p>`,\n          onOk: () => {\n            this.cancelIndividualRebateRatio(row.id);\n          }\n        });\n      },\n\n      cancelIndividualRebateRatio(agentId) {\n        this.$http.post(global.url.cancel_agent_individual_rebate_ratio, {\n          agentId: agentId\n        }).then(record => {\n          if (!record) {\n            return;\n          }\n\n          if (record.err_code != 0) {\n            this.$Message.error(record.err_msg);\n          } else {\n            this.$Message.info(\"操作成功\");\n\n            // 自动执行查询以刷新页面数据\n            this.latestSearch();\n          }\n        });\n      },\n\n      getAgentLevelNameByLevel(level) {\n        switch (level.toString()) {\n          case '1':\n            return \"预备代理\"\n          case '2':\n            return \"普通代理\"\n          case '3':\n            return \"铜牌代理\"\n          case '4':\n            return \"银牌代理\"\n          case '5':\n            return \"金牌代理\"\n          default:\n            return \"\";\n        }\n      }\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/operation/individual-rebate.vue"],"sourceRoot":""}